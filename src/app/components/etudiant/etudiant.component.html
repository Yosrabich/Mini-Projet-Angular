<div [ngStyle]="{'width': '100%'}">



<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
  <a class="navbar-brand" style="color:white;">Etudiant dashboard</a>
  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarColor02" aria-controls="navbarColor02" aria-expanded="false" aria-label="Toggle navigation">
  <span class="navbar-toggler-icon"></span>
  </button>
  <div class="collapse navbar-collapse" id="navbarColor02">
     <ul class="navbar-nav mr-auto">
        <li class="nav-item active">
           <a class="nav-link" (click)="onOpenModal(null!, 'add')" >Add Etudiant <span class="sr-only"></span></a>
        </li>
        <li class="nav-item active"> <a class="nav-link" [(ngModel)]="nom" (click)="sortetudiantbynom();" >Sort By Name:<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-sort-alpha-down-alt" viewBox="0 0 16 16">
         <path d="M12.96 7H9.028v-.691l2.579-3.72v-.054H9.098v-.867h3.785v.691l-2.567 3.72v.054h2.645V7z"/>
         <path fill-rule="evenodd" d="M10.082 12.629 9.664 14H8.598l1.789-5.332h1.234L13.402 14h-1.12l-.419-1.371h-1.781zm1.57-.785L11 9.688h-.047l-.652 2.156h1.351z"/>
         <path d="M4.5 2.5a.5.5 0 0 0-1 0v9.793l-1.146-1.147a.5.5 0 0 0-.708.708l2 1.999.007.007a.497.497 0 0 0 .7-.006l2-2a.5.5 0 0 0-.707-.708L4.5 12.293V2.5z"/>
       </svg></a></li>
     </ul>
     
     <form class="form-inline my-2 my-lg-0">
        <input type="search" [(ngModel)] = "op" name="key" id="searchName" class="form-control mr-sm-2" placeholder="Search Etudiants..." required> <button (click)="getetudiantbyOption();">Recherche</button>
     </form>

  </div>
</nav>
<br>
<div class="container" id="main-container">
    <div class="row">
        <div *ngFor="let etudiant of etudiant" class="col-md-6 col-xl-3">
            <div class="card m-b-30">
                <div class="card-body row">
                    <div class="col-6">
                        <a href=""><img src="assets/img/{{etudiant?.imageUrl}}" alt="" class="img-fluid rounded-circle w-60"></a>
                    </div>
                    <div class="col-6 card-title align-self-center mb-0">
                        <h5>{{etudiant?.nom}}</h5>
                        <p class="m-0">{{etudiant?.prenom}}</p>
                       
                    </div>
                </div>
            
                <ul class="list-group list-group-flush">
                    <li class="list-group-item"><i class="fa fa-envelope float-right"></i>{{etudiant?.email}}</li>
                    <li  class="list-group-item"><i class="fa fa-phone float-right"></i> {{etudiant?.telephone}}</li>
                    <li  class="list-group-item"><i>Option : {{etudiant?.op}}</i> </li>
                    <li  class="list-group-item"><i>department : {{etudiant?.departement?.nomDepart}} <span *ngIf="etudiant?.departement == null">not assigned</span></i> </li>

                </ul>
                <div class="card-body">
                    <div class="float-right btn-group btn-group-sm">
                        <a (click)="onOpenModal(etudiant, 'edit')"class="btn btn-primary tooltips" data-placement="top" data-toggle="tooltip" data-original-title="Edit"><i class="fa fa-pencil"></i> </a>
                        <a (click)="onOpenModal(etudiant, 'delete')" class="btn btn-secondary tooltips" data-placement="top" data-toggle="tooltip" data-original-title="Delete"><i class="fa fa-times"></i></a>
                        <a (click)="onOpenModalAssign(etudiant)" class="btn btn-primary tooltips" data-placement="top" data-toggle="tooltip" data-original-title="Edit"><i class="fa fa-plus" aria-hidden="true"></i></a>
                        
                    </div>
                    <ul class="social-links list-inline mb-0">
                        <li class="list-inline-item"><a title="" data-placement="top" data-toggle="tooltip" class="tooltips" href="" data-original-title="Facebook"><i class="fa fa-facebook-f"></i></a></li>
                        <li class="list-inline-item"><a title="" data-placement="top" data-toggle="tooltip" class="tooltips" href="" data-original-title="Twitter"><i class="fa fa-twitter"></i></a></li>
                        <li class="list-inline-item"><a title="" data-placement="top" data-toggle="tooltip" class="tooltips" href="" data-original-title="Skype"><i class="fa fa-skype"></i></a></li>

                        
                     </ul>
                </div>
            </div>
        </div>   
    </div>
</div>

<div class="modal fade" id="addEtudiantModal" tabindex="-1" role="dialog" aria-labelledby="addEtudiantModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
      
        <div class="modal-content">
           <div class="modal-header">
              <h5 class="modal-title" id="addEtudiantModalLabel">Add Etudiant</h5>
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
              </button>
           </div>
           <div class="modal-body">
              <form #addForm="ngForm" (ngSubmit)="onAddEtudiant(addForm)">
              <div class="form-group">
                 <label for="name">Nom</label>
                 <input type="text" ngModel name="nom" class="form-control" id="nom" placeholder="Name" required>
              </div>
              <div class="form-group">
                <label for="name">Prenom</label>
                <input type="text" ngModel name="prenom" class="form-control" id="prenom" placeholder="Prenom" required>
             </div>
              <div class="form-group">
                 <label for="email">Addresse Mail</label>
                 <input type="email" ngModel name="email" class="form-control" id="email" placeholder="Email" required>
              </div>
              <div class="form-group">
                <label for="telephone">Telephone</label>
                <input type="telephone" ngModel name="telephone" class="form-control" id="telephone" placeholder="Telephone" required>
             </div>
              <div class="form-group">
                 <label for="phone">Image URL</label>
                 <input type="text" ngModel name="imageUrl" class="form-control" id="imageUrl" placeholder="Image URL" required>
              </div>
              <div>
                <label for="op">Choisi une option:</label>

                    <select ngModel="{{editeetudiant?.op}}" name="op" class="form-control" id="op" placeholder="Option" required>
                        <option value="GAMIX">GAMIX</option>
                        <option value="SIM">SIM</option>
                        <option value="NIDS">NIDS</option>
                        <option value="SE">SE</option>
                    </select>
              </div>
              <div class="modal-footer">
                 <button type="button" id="add-etudiant-form" class="btn btn-secondary" data-dismiss="modal">Close</button>
                 <button [disabled]="addForm.invalid" type="submit" class="btn btn-primary" >Save changes</button>
              </div>
              </form>
           </div>
        </div>
      </div>
      </div>
    
    
<div class="modal fade" id="updateEtudiantModal" tabindex="-1" role="dialog" aria-labelledby="updateEtudiantModal" aria-hidden="true">
      <div class="modal-dialog" role="document">
         <div class="modal-content">
            <div class="modal-header">
               <h5 class="modal-title" id="updateEtudiantModalLabel">Edit Etudiant {{editeetudiant?.nom}}</h5>
               <button type="button" class="close" data-dismiss="modal" aria-label="Close">
               <span aria-hidden="true">&times;</span>
               </button>
            </div>
            <div class="modal-body">
               <form #editForm="ngForm">
                  <div class="form-group">
                     <label for="nom">Nom</label>
                     <input type="text" ngModel="{{editeetudiant?.nom}}" name="nom" class="form-control" id="nom" aria-describedby="emailHelp" placeholder="Nom">
                  </div>
                  <input type="hidden" ngModel="{{editeetudiant?.idEtudiant}}" name="idEtudiant" class="form-control" id="idEtudiant" placeholder="Email">
                  <div class="form-group">
                     <label for="Prenom">Prenom</label>
                     <input type="text" ngModel="{{editeetudiant?.prenom}}" name="prenom" class="form-control" id="prenom" placeholder="prenom">
                  </div>
                  <div class="form-group">
                     <label for="email">Email Address</label>
                     <input type="email" ngModel="{{editeetudiant?.email}}" name="email" class="form-control" id="email" placeholder="Email">
                  </div>
                  <div class="form-group">
                     <label for="phone">Telephone</label>
                     <input type="text" ngModel="{{editeetudiant?.telephone}}" name="telephone" class="form-control" id="telephone" name="telephone" placeholder="Telephone">
                  </div>
                  <div class="form-group">
                     <label for="ImageUrl">Image URL</label>
                     <input type="text" ngModel="{{editeetudiant?.imageUrl}}" name="imageUrl" class="form-control" id="imageUrl" placeholder="Image URL">
                  </div>
                  <div>
                     <label for="op">Choisir une option:</label>
     
                         <select id="op" ngModel="{{editeetudiant?.op}}" name="op" class="form-control" id="op" placeholder="Option" required>
                             <option value="GAMIX">GAMIX</option>
                             <option value="SIM">SIM</option>
                             <option value="NIDS">NIDS</option>
                             <option value="SE">SE</option>
                         </select>
                   </div>
                  <div class="modal-footer">
                     <button type="button" id="" data-dismiss="modal" class="btn btn-secondary">Close</button>
                     <button (click)="onUpdateEtudiant(editForm.value)" data-dismiss="modal" class="btn btn-primary" >Save changes</button>
                  </div>
               </form>
            </div>
         </div>
      </div>
    </div>
       
    <div class="modal fade" id="deleteEtudiantModal" tabindex="-1" role="dialog" aria-labelledby="deleteEtudiantModal" aria-hidden="true">
      <div class="modal-dialog" role="document">
         <div class="modal-content">
            <div class="modal-header">
               <h5 class="modal-title" id="deleteEtudiantModalLabel">Delete Etudiant</h5>
               <button type="button" class="close" data-dismiss="modal" aria-label="Close">
               <span aria-hidden="true">&times;</span>
               </button>
            </div>
            <div class="modal-body">
               <p>Are you sure you want to delete etudiant {{deleteEtudiant?.nom}}?</p>
               <div class="modal-footer">
                  <button type="button" class="btn btn-secondary" data-dismiss="modal">No</button>
                  <button (click)="onDeleteEtudiant(deleteEtudiant.idEtudiant)" class="btn btn-danger" data-dismiss="modal">Yes</button>
               </div>
            </div>
         </div>
      </div>
    </div>

    <div class="modal fade" id="assignEtudiantModal" tabindex="-1" role="dialog" aria-labelledby="assignEtudiantModalLabel" aria-hidden="true">
      <div class="modal-dialog" role="document">
        
          <div class="modal-content">
             <div class="modal-header">
                <h5 class="modal-title" id="assignEtudiantModalLabel">assign Etudiant to departement</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
                </button>
             </div>
             <div class="modal-body">
                <form #assignForm="ngForm" (ngSubmit)="assignEtudiantToDep(assignForm)">
                
                <div>
                  <label for="op">Choisi un deppartement:</label>
  
                      <select ngModel="{{assignEtudiant?.departement?.idDepart}}" name="idDep" class="form-control" id="op" placeholder="Option" required>
                          <option *ngFor="let departement of departements"  value="{{departement.idDepart}}">{{departement.nomDepart}}</option>
                      </select>
                </div>
                <div class="modal-footer">
                   <button type="button" id="assign-etudiant-form" class="btn btn-secondary" data-dismiss="modal">Close</button>
                   <button [disabled]="assignForm.invalid" type="submit" class="btn btn-primary" >Save changes</button>
                </div>
                
                </form>
             </div>
          </div>
        </div>
        </div>

        
        <div class="alert alert-danger" role="alert" *ngIf="notification===true">
        {{messageNotif}}
       </div>
    
<!-- Notification for no employees -->
<div  class="col-lg-12 col-md-12 col-xl-12" *ngIf="etudiant.length == 0">
    <div class="alert alert-info" role="alert">
      <h4 class="alert-heading">Pas D'étudiant!</h4>
      <p>Aucun étudiant trouvé</p>
    </div>
    </div>

   </div>